webpackJsonp([1],{"/Hv2":function(t,e){},"34KM":function(t,e){},G8FQ:function(t,e){},GlEH:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("IvJb"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("keep-alive",[e("router-view")],1)],1)},staticRenderFns:[]};var n=a("vSla")({},s,!1,function(t){a("YfI/")},null,null).exports,r=a("zO6J"),l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[e("ul",{staticClass:"menu"},[e("li",{staticClass:"item"},[e("router-link",{attrs:{to:"/function?type=1"}},[this._v("新建")])],1),this._v(" "),e("li",{staticClass:"item"},[e("router-link",{attrs:{to:"/function?type=2"}},[this._v("志伟")])],1),this._v(" "),e("li",{staticClass:"item"},[e("router-link",{attrs:{to:"/function?type=3"}},[this._v("志飞")])],1)]),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var o=a("vSla")({},l,!1,function(t){a("GlEH")},"data-v-27f843ee",null).exports,c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"function"},[a("ul",{staticClass:"menu"},[a("li",{staticClass:"item"},[a("div",{on:{click:function(e){t.goto("/room")}}},[t._v("设置")])]),t._v(" "),a("li",{staticClass:"item"},[a("div",{on:{click:function(e){t.goto("/form")}}},[t._v("抄表")])]),t._v(" "),a("li",{staticClass:"item"},[a("div",{on:{click:function(e){t.goto("/bill")}}},[t._v("抄单")])]),t._v(" "),a("li",{staticClass:"item"},[a("div",{on:{click:function(e){t.goto("/record")}}},[t._v("抄簿")])])])])},staticRenderFns:[]};var u=a("vSla")({methods:{goto:function(t){this.$router.push({path:t,query:{type:this.$route.query.type}})}}},c,!1,function(t){a("kBPu")},"data-v-0f187052",null).exports,v=a("4Xi4"),d=a.n(v),h={data:function(){return{data:{}}},props:{udata:{type:Object,default:function(){return{}}}},created:function(){this.data=this.udata},methods:{quit:function(){this.$emit("quit")},submit:function(){this.data.NO=parseInt(this.data.NO),this.data.rent=parseInt(this.data.rent),this.data.day=parseInt(this.data.day),d()(this.data.day)||(this.data.day=1),d()(this.data.NO)&&d()(this.data.rent)?this.$emit("submit",this.data):this.$message("不能有空值！")}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"room"},[a("div",[a("div",{staticClass:"head"},[a("div",{staticClass:"head-left",on:{click:t.quit}},[t._v("关闭")]),t._v(" "),a("div",{staticClass:"head-center"},[t._v("设置")]),t._v(" "),a("div",{staticClass:"head-right",on:{"&click":function(e){return t.submit(e)}}},[t._v("提交")])]),t._v(" "),a("div",{staticClass:"a-item a-type"},[t._v("房号：\n      "),a("el-input",{staticClass:"a-input",attrs:{type:"number",placeholder:"101"},model:{value:t.data.NO,callback:function(e){t.$set(t.data,"NO",t._n(e))},expression:"data.NO"}})],1),t._v(" "),a("div",{staticClass:"a-item a-type"},[t._v("租金：\n      "),a("el-input",{staticClass:"a-input",attrs:{type:"number",placeholder:"租金"},model:{value:t.data.rent,callback:function(e){t.$set(t.data,"rent",t._n(e))},expression:"data.rent"}})],1),t._v(" "),a("div",{staticClass:"a-item a-type"},[t._v("日期：\n      "),a("el-input",{staticClass:"a-input",attrs:{type:"number",placeholder:"收租日期"},model:{value:t.data.day,callback:function(e){t.$set(t.data,"day",t._n(e))},expression:"data.day"}})],1)])])},staticRenderFns:[]};var p=a("vSla")(h,m,!1,function(t){a("TnB9")},"data-v-c2cb5926",null).exports,f=a("aozt"),_=a.n(f),y={data:function(){var t=this;return{data:[],udata:{},isAdd:!0,titles:[{prop:"NO",label:"房号"},{prop:"rent",label:"租金"},{prop:"day",label:"日期"}],isOpenAdd:!1,filters:[{prop:"NO",value:""}],actionCol:{props:{label:"操作"},buttons:[{handler:function(e){t.update(e)},label:"编辑"},{handler:function(e){t.delete(e)},label:"删除"}]},selectedRow:[]}},created:function(){this.getRoomList()},methods:{getRoomList:function(){var t=this;this.data=[];var e={type:this.$route.query.type};_.a.get("/room",{params:e}).then(function(e){t.data=e.data})},openAdd:function(){this.isOpenAdd=!0,this.udata={},this.isAdd=!0},submit:function(t){var e=this;this.isAdd?(t.type=this.$route.query.type,_.a.post("/room",t).then(function(a){e.isOpenAdd=!1,e.$message("添加成功！"),e.data.unshift(t)})):(t.type=this.$route.query.type,_.a.put("/room",t).then(function(t){t.data.ok?(e.isOpenAdd=!1,e.$message("修改成功！")):e.$message("修改失败！")}))},quit:function(){this.isOpenAdd=!1},delete:function(t){var e=this,a={id:t._id};_.a.delete("/room",{params:a}).then(function(a){a.data.ok&&(e.data.splice(e.data.indexOf(t),1),e.$message("删除成功！"))})},update:function(t){this.isOpenAdd=!0,this.isAdd=!1,this.udata=t},width:function(t){if("title"!==t)return 60},handleSelectionChange:function(t){this.selectedRow=t}},watch:{$route:function(t,e){this.$route.query.type!==this.type&&this.getRoomList()}},components:{roomAdd:p}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"room",staticClass:"room"},[a("div",[a("div",{staticClass:"room-head"},[t._v("设置")]),t._v(" "),a("div",{staticStyle:{margin:"10px 0"}},[a("el-row",[a("el-col",{staticStyle:{margin:"0 10px"},attrs:{span:8}},[a("el-input",{attrs:{placeholder:"搜索"},model:{value:t.filters[0].value,callback:function(e){t.$set(t.filters[0],"value",e)},expression:"filters[0].value"}})],1),t._v(" "),a("el-col",{staticStyle:{margin:"0 15px"},attrs:{span:5}},[a("el-button",{on:{click:t.openAdd}},[t._v("添加")])],1)],1)],1),t._v(" "),a("data-tables",{staticClass:"data-table",staticStyle:{width:"100%"},attrs:{data:t.data,"current-page":3,"page-size":5,"pagination-props":{background:!1,small:!0,layout:"prev, pager, next",pageSizes:[6,1,3]},"action-col":t.actionCol,filters:t.filters},on:{"selection-change":t.handleSelectionChange}},t._l(t.titles,function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,sortable:"custom"}})})),t._v(" "),t.isOpenAdd?a("room-add",{attrs:{udata:t.udata},on:{quit:t.quit,submit:t.submit}}):t._e()],1)])},staticRenderFns:[]};var g=a("vSla")(y,C,!1,function(t){a("WvnM")},"data-v-2a100d10",null).exports,b=a("rVsN"),w=a.n(b),E={data:function(){return{data:[],type:1,year:2018,month:1,day:1,create:!1,hide:!0}},created:function(){this.initData()},methods:{initData:function(){var t=new Date;this.year=t.getFullYear(),this.month=t.getMonth()+1,this.type=this.$route.query.type;var e={type:this.type,year:this.year,month:this.month};this.getData(e)},getData:function(t){var e=this;this.data=[],_.a.get("/bill/list",{params:t}).then(function(t){if(0===t.data.length)return e.create=!0,void(e.data=[]);e.data=t.data})},createForm:function(){var t=this,e={type:this.type};_.a.get("/room/2",{params:e}).then(function(e){var a=[];e.data.forEach(function(e){e.month=t.month,e.year=t.year,a.push(e)}),t.createBill(a).then(function(e){t.create=!1,t.data=e})})},createBill:function(t){return _.a.post("/bill",t).then(function(t){return w.a.resolve(t.data)})},modify:function(t){_.a.put("/bill",t).then(function(t){})},changeDate:function(){var t={type:this.$route.query.type,year:this.year,month:this.month};this.getData(t)}},watch:{$route:function(t,e){this.$route.query.type!==this.type&&this.changeDate()}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form"},[a("div",{staticClass:"selectM"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],staticClass:"year",attrs:{type:"number"},domProps:{value:t.year},on:{blur:function(e){e.preventDefault(),t.changeDate()},input:function(e){e.target.composing||(t.year=e.target.value)}}}),t._v("年\n    "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.month,expression:"month"}],staticClass:"month",attrs:{type:"number"},domProps:{value:t.month},on:{blur:function(e){e.preventDefault(),t.changeDate()},input:function(e){e.target.composing||(t.month=e.target.value)}}}),t._v("月\n  ")]),t._v(" "),a("ul",{staticClass:"list"},t._l(t.data,function(e,i){return a("li",{key:i,staticClass:"item"},[a("el-switch",{model:{value:e.billing,callback:function(a){t.$set(e,"billing",a)},expression:"item.billing"}}),t._v(" "),a("div",{staticClass:"item-title"},[t._v(t._s(e.NO))]),t._v(" "),a("el-input",{staticClass:"item-input",attrs:{type:"number"},on:{blur:function(a){a.preventDefault(),t.modify(e)}},model:{value:e.water,callback:function(a){t.$set(e,"water",t._n(a))},expression:"item.water"}}),t._v(" "),a("el-input",{staticClass:"item-input",attrs:{type:"number"},on:{blur:function(a){a.preventDefault(),t.modify(e)}},model:{value:e.electric,callback:function(a){t.$set(e,"electric",t._n(a))},expression:"item.electric"}})],1)})),t._v(" "),t.create?a("div",{on:{click:t.createForm}},[t._v("创建抄单表")]):t._e()])},staticRenderFns:[]};var D=a("vSla")(E,$,!1,function(t){a("nrpK")},"data-v-213215b7",null).exports,k={data:function(){return{data:[],thisMonth:[],lastMonth:[],type:1,year:2018,month:1,day:1,rooms:0,total:0}},created:function(){this.initData()},methods:{initData:function(){var t=new Date;this.year=t.getFullYear(),this.month=t.getMonth()+1,this.type=this.$route.query.type;var e={type:this.type,year:this.year,month:this.month};this.getData(e)},getData:function(t){var e=this;this.getBillList(t).then(function(a){if(0!==a.length){e.thisMonth=a;var i={};i.NO=t.NO,i.type=e.type,1!==t.month?(i.month=t.month-1,i.year=t.year):(i.month=12,i.year=t.year-1),e.getBillList(i).then(function(t){e.total=0,e.rooms=0,0!==t.length?(e.lastMonth=t,e.thisMonth.forEach(function(t){var a=e.searchBill(t,e.lastMonth);t.lastWater=a.water,t.lastElectric=a.electric,t.differW=t.water-a.water>3?t.water-a.water:3,t.differE=t.electric-a.electric<0?t.electric-a.electric+1e4:t.electric-a.electric,t.rateW=t.differW*t.priceW,t.rateE=Math.round(t.differE*t.priceE),t.total=t.rent+t.rateW+t.rateE,e.data.push(t),t.billing&&(e.total+=t.total,e.rooms++)})):e.thisMonth.forEach(function(t){t.lastWater=0,t.lastElectric=0,t.differW=0,t.differE=0,t.rateW=0,t.rateE=0,t.total=0,e.data.push(t),e.total+=t.rent,e.rooms++})})}})},getBillList:function(t){return _.a.get("/bill/list",{params:t}).then(function(t){return w.a.resolve(t.data)})},searchBill:function(t,e){for(var a=0;a<e.length;a++)if(e[a].NO===t.NO)return e[a]},changeDate:function(){var t={type:this.$route.query.type,year:this.year,month:this.month};this.data=[],this.getData(t)}},watch:{$route:function(t,e){this.$route.query.type!==this.type&&this.changeDate()}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bill"},[a("div",{staticClass:"selectM"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],staticClass:"year",attrs:{type:"number"},domProps:{value:t.year},on:{blur:function(e){e.preventDefault(),t.changeDate()},input:function(e){e.target.composing||(t.year=e.target.value)}}}),t._v("年\n    "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.month,expression:"month"}],staticClass:"month",attrs:{type:"number"},domProps:{value:t.month},on:{blur:function(e){e.preventDefault(),t.changeDate()},input:function(e){e.target.composing||(t.month=e.target.value)}}}),t._v("月\n  ")]),t._v(" "),a("ul",{staticClass:"list"},t._l(t.data,function(e,i){return a("li",{directives:[{name:"show",rawName:"v-show",value:e.billing,expression:"item.billing"}],key:i,staticClass:"item"},[a("div",{staticClass:"item-we"},[a("div",{staticClass:"item-input"},[t._v(t._s(e.NO))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.year)+"年"+t._s(e.month)+"月"+t._s(t.day)+"日")])]),t._v(" "),t._m(0,!0),t._v(" "),a("div",{staticClass:"item-we"},[a("div",{staticClass:"item-input"},[t._v("水费")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.lastWater))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.water))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.differW))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.priceW))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.rateW))])]),t._v(" "),a("div",{staticClass:"item-we"},[a("div",{staticClass:"item-input"},[t._v("电费")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.lastElectric))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.electric))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.differE))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.priceE))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.rateE))])]),t._v(" "),a("div",{staticClass:"item-we"},[a("div",{staticClass:"item-input item-start"},[t._v("房租")]),t._v(" "),a("div",{staticClass:"item-input item-right"},[t._v(t._s(e.rent))])]),t._v(" "),a("div",{staticClass:"item-we item-total"},[t._v("¥"+t._s(e.total))])])})),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.data.length,expression:"data.length"}],staticClass:"total"},[t._v("共"+t._s(t.rooms)+"套，"+t._s(t.total)+"元")])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-we"},[a("div",{staticClass:"item-input"},[t._v("项目")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v("上月")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v("本月")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v("实用")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v("单价")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v("金额")])])}]};var O=a("vSla")(k,N,!1,function(t){a("G8FQ")},null,null).exports,x={data:function(){return{data:[],thisMonth:[],lastMonth:[],type:1,year:2018,month:1,day:1,rooms:0,total:0}},created:function(){this.initData()},methods:{initData:function(){var t=new Date;this.year=t.getFullYear(),this.month=t.getMonth()+1,this.type=this.$route.query.type;var e={type:this.type,year:this.year,month:this.month};this.getData(e)},getData:function(t){var e=this;this.getBillList(t).then(function(a){if(0!==a.length){e.thisMonth=a;var i={};i.NO=t.NO,i.type=e.type,1!==t.month?(i.month=t.month-1,i.year=t.year):(i.month=12,i.year=t.year-1),e.getBillList(i).then(function(t){0!==t.length?(e.lastMonth=t,e.thisMonth.forEach(function(t){var a=e.searchBill(t,e.lastMonth);t.lastWater=a.water,t.lastElectric=a.electric,t.differW=t.water-a.water>3?t.water-a.water:3,t.differE=t.electric-a.electric<0?t.electric-a.electric+1e4:t.electric-a.electric,t.rateW=t.differW*t.priceW,t.rateE=Math.round(t.differE*t.priceE),t.total=t.rent+t.rateW+t.rateE,e.data.push(t),e.total+=t.total}),e.rooms=e.data.length):e.thisMonth.forEach(function(t){t.lastWater=0,t.lastElectric=0,t.differW=0,t.differE=0,t.rateW=0,t.rateE=0,t.total=0,e.data.push(t)})})}})},getBillList:function(t){return _.a.get("/bill/list",{params:t}).then(function(t){return w.a.resolve(t.data)})},searchBill:function(t,e){for(var a=0;a<e.length;a++)if(e[a].NO===t.NO)return e[a]},changeDate:function(){var t={type:this.$route.query.type,year:this.year,month:this.month};this.data=[],this.getData(t)}},watch:{$route:function(t,e){this.$route.query.type!==this.type&&this.changeDate()}}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"record"},[a("div",{staticClass:"selectM"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],staticClass:"year",attrs:{type:"number"},domProps:{value:t.year},on:{blur:function(e){e.preventDefault(),t.changeDate()},input:function(e){e.target.composing||(t.year=e.target.value)}}}),t._v("年\n    "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.month,expression:"month"}],staticClass:"month",attrs:{type:"number"},domProps:{value:t.month},on:{blur:function(e){e.preventDefault(),t.changeDate()},input:function(e){e.target.composing||(t.month=e.target.value)}}}),t._v("月\n  ")]),t._v(" "),a("ul",{staticClass:"list"},t._l(t.data,function(e,i){return a("li",{key:i,staticClass:"item"},[a("div",{staticClass:"item-title"},[t._v(t._s(e.NO))]),t._v(" "),t._m(0,!0),t._v(" "),a("div",{staticClass:"item-we"},[a("div",{staticClass:"item-input"},[t._v(t._s(e.day))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.rent))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.water))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.differW))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.rateW))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.electric))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.differE))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.rateE))]),t._v(" "),a("div",{staticClass:"item-input"},[t._v(t._s(e.total))])])])})),t._v(" "),a("div",{staticClass:"blank"})])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item-we"},[a("div",{staticClass:"item-input"},[t._v("日")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v("租金")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v("总水")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v("月水")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v("水款")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v("总电")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v("月电")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v("电款")]),t._v(" "),a("div",{staticClass:"item-input"},[t._v("合计")])])}]};var W=a("vSla")(x,M,!1,function(t){a("lmTE")},null,null).exports;i.default.use(r.a);var q=new r.a({routes:[{path:"/",name:"Home",component:o},{path:"/function",name:"function",component:u},{path:"/room",name:"room",component:g},{path:"/form",name:"form",component:D},{path:"/bill",name:"bill",component:O},{path:"/record",name:"record",component:W}]}),B=a("iDdd"),S=a.n(B),F=(a("D0oh"),a("34KM"),a("t+b9")),A=a.n(F),R=(a("/Hv2"),a("S/Lh"));S.a.attach(document.body),i.default.use(A.a),i.default.use(R.DataTables),i.default.config.productionTip=!1,new i.default({el:"#app",router:q,render:function(t){return t(n)}})},TnB9:function(t,e){},WvnM:function(t,e){},"YfI/":function(t,e){},kBPu:function(t,e){},lmTE:function(t,e){},nrpK:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.194f47d97059b375b4be.js.map